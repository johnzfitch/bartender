// Bartender - Clean utilitarian bar
@use "sass:string";

// GTK alpha function wrapper
@function gtkalpha($c, $a) {
  @return string.unquote("alpha(#{$c},#{$a})");
}

$background: #1a1b26;
$foreground: #c0caf5;
$dim: rgba($foreground, 0.35);
$accent: #7aa2f7;
$green: #9ece6a;
$yellow: #e0af68;
$red: #f7768e;

window.bartender {
  background: transparent;
  font-family: "Berkeley Mono", "JetBrainsMono Nerd Font", monospace;
  font-size: 13px;
  color: $foreground;

  > box {
    background: gtkalpha($background, 0.85);
    padding: 0 8px;
  }

  // Strip ALL button chrome
  button,
  menubutton > button {
    all: unset;
    padding: 8px 6px;
    transition: color 100ms ease;
  }

  menubutton {
    all: unset;
  }

  // Popover keeps some structure
  popover {
    background: $background;
    color: $foreground;
    border: 1px solid rgba($foreground, 0.15);
    border-radius: 6px;
    padding: 8px;
  }

  // Workspaces - always 1-5, visual states like waybar
  .workspaces {
    .ws {
      padding: 8px 6px;
      font-size: 13px;
      font-weight: normal;
      color: rgba($foreground, 0.2); // default empty

      &.occupied {
        color: rgba($foreground, 0.7);
      }

      &.focused {
        color: $foreground;
        font-weight: bold;
      }

      &:hover {
        color: $accent;
      }
    }
  }

  // Clock - clean
  .clock button {
    padding: 8px 12px;
    color: $foreground;

    &:hover {
      color: $accent;
    }
  }

  // Feed ticker
  .feed-ticker {
    padding: 8px 16px;
    color: $foreground;

    &.loading {
      color: $dim;
    }

    &.error {
      color: $red;
    }

    label {
      font-weight: normal;
    }

    &:hover label {
      color: $accent;
    }
  }

  // System tray
  .tray {
    menubutton > button {
      padding: 8px 4px;

      &:hover image {
        opacity: 0.8;
      }
    }

    image {
      min-width: 16px;
      min-height: 16px;
    }
  }

  // Volume
  .volume {
    > button {
      padding: 8px 6px;
      color: $foreground;

      &:hover {
        color: $accent;
      }
    }

    slider {
      min-height: 6px;
      margin: 8px;

      trough {
        background: rgba($foreground, 0.15);
        border-radius: 3px;
        min-height: 6px;
      }

      highlight {
        background: $accent;
        border-radius: 3px;
      }

      slider {
        background: $foreground;
        border-radius: 50%;
        min-width: 12px;
        min-height: 12px;
        margin: -3px;
      }
    }
  }

  // Status colors for VPN, ProxyForge, Audio
  .vpn {
    &.connected { color: $green; }
    &.connecting { color: $yellow; }
    &.disconnected { color: $dim; }
  }

  .proxyforge {
    &.proxyforge-active { color: $green; }
    &.proxyforge-starting,
    &.proxyforge-stopping { color: $yellow; }
    &.proxyforge-off { color: $dim; }
  }

  .audio {
    &.speakers { color: $foreground; }
    &.headphones { color: $foreground; }
    &.both { color: $green; }
    &.muted { color: $red; }
  }

  // All images/icons inherit color
  image {
    -gtk-icon-style: symbolic;
  }
}
